class htmlElement{constructor(e){this.element=e}copy(){return this.element.clone()}remove(){this.element.remove()}append(e){this.element.append(e)}}class tetragon3d extends htmlElement{constructor(e,t){super(e),this.rotationSpeed=t>1?1:t,this.planes=this.element.children("div"),this.speedMeasure={start:void 0,stop:void 0,lastMeasuredAngle:void 0,speedArr:[],avgSpeed:void 0},this.motionData={currentAngle:0,targetAngle:void 0,move:!0},this.easing=[]}calculateEntryValues(){this.speedMeasure.avgSpeed=30/(60*this.rotationSpeed)}animateRotationY(){if(this.speedMeasure.avgSpeed||this.calculateEntryValues(),this.motionData.move){let e=this.computeRotatingTime();this.computeAvgSpeed(e),0!==this.easing.length&&(console.log(this.easing),this.applyEasing()),this.motionData.currentAngle-=this.rotationSpeed,this.motionData.currentAngle=this.motionData.currentAngle<=-360?0:this.motionData.currentAngle,this.element.css("transform",` translateZ(-250px) rotateY(${this.motionData.currentAngle}deg)`),Math.ceil(this.motionData.currentAngle)===this.motionData.targetAngle&&(this.motionData.move=!1),window.requestAnimationFrame(()=>this.animateRotationY())}}computeEasing(e){let t,a,s,n,i,r,o=Math.abs(Math.abs(this.motionData.targetAngle)-Math.abs(this.motionData.currentAngle)),h=o<20?5:10,l=[],g=this.rotationSpeed;switch(!0){case o<=10:a=0;break;case o<=20:a=3;break;case o<=30:a=8;break;case o<=40:a=15;break;case o<=50:a=24;break;case o<=60:a=32;break;case o<=70:a=40;break;case o<=80:a=50;break;case o<=90:a=60}t=(o-a)/h,n=g/h,s=g,r=i="forth"===e?this.motionData.currentAngle-a:this.motionData.currentAngle+a,t="forth"===e?-t:t;for(let e=1;e<h;e++)r+=t,s=(s-=n)>0?s<.15?.15:s:s>-.15?-.15:s,l[e-1]=[],l[e-1].push(Math.round(r)),l[e-1].push(parseFloat(s.toFixed(2)));return l}applyEasing(){this.easing.forEach(e=>{Math.round(this.motionData.currentAngle)===e[0]&&(this.rotationSpeed=e[1])})}computeRotatingTime(){let e,t=Math.abs(Math.floor(this.motionData.currentAngle)),a=!(t%31);return this.speedMeasure.lastMeasuredAngle===t?null:(this.speedMeasure.lastMeasuredAngle=t,this.speedMeasure.measureAngle===t?(this.speedMeasure.stop=new Date,e=(this.speedMeasure.stop-this.speedMeasure.start)/1e3):(a&&(this.speedMeasure.measureAngle=360===this.motionData.currentAngle?30:t+30,this.speedMeasure.start=new Date),null))}computeAvgSpeed(e){null!==e&&(this.speedMeasure.speedArr.push(e),this.speedMeasure.speedArr.length>4&&this.speedMeasure.speedArr.shift(),this.speedMeasure.avgSpeed=this.speedMeasure.speedArr.reduce((e,t)=>e+t,0)/this.speedMeasure.speedArr.length)}getTargetAngle(e){switch($(e.target).attr("id")){case"front":this.motionData.targetAngle=0;break;case"right":this.motionData.targetAngle=-90;break;case"back":this.motionData.targetAngle=-180;break;case"left":this.motionData.targetAngle=-270}}shouldChangeDirection(){let e="forth";return 0===this.motionData.targetAngle?(this.rotationSpeed=this.motionData.currentAngle<-180?this.rotationSpeed:-this.rotationSpeed,e=this.motionData.currentAngle<-180?"forth":"back"):this.motionData.currentAngle<this.motionData.targetAngle&&(this.rotationSpeed=-this.rotationSpeed,e="back"),e}planeClickEvent(e){e?this.planes.on("click",e=>{this.getTargetAngle(e);let t=this.shouldChangeDirection();this.easing=this.computeEasing(t),console.log(this.easing)}):this.planes.off()}}$(()=>{let e=new tetragon3d($("#top-layer"),1);e.animateRotationY(),e.planeClickEvent(!0),Math.easeOutQuad=function(e,t,a,s){return-a*(e/=s)*(e-2)+t};Math.easeOutQuad(.6,54,36,.4)});
//# sourceMappingURL=main.js.map
